# Customisation of the New Repo

If you are using this repo as a template, you can customize the content below to suit your needs:
- src/dendrograms/Makefile: Customise taxonomy ID
- create `src/dendrograms/taxonomy_details.yaml`
- PCL and CL id ranges to be used in the ontology (shouldn't overlap with existing IDs)
  - src/scripts/pcl_id_factory.py
    - WMBO: PCL:0110000 - PCL:0159999 (49520 ids) - (Actually, 0142978 is the last used)
  - src/scripts/cl_id_factory.py
    - https://github.com/obophenotype/cell-ontology/blob/master/src/ontology/cl-idranges.owl
    - BICAN, automatic generation: >= 4300001, < 4800000
    - WMBO: 4300000 - 4308000 (7939 ids)
    - BGO: 4310000 -  ()
  - src/scripts/clm_id_factory.py
    - https://github.com/Cellular-Semantics/CellMark/blob/main/src/ontology/clm-idranges.owl
    - BICAN, automatic generation: >= 5000000 , <= 5999999
    - WMBO: 5000000 - 5031000 (30760 ids)
    - BGO: 5050000 - ()
  - Check label sets as well
- Generate Gene database (src/templates/genedb.tsv)
  - Use `src/scripts/anndata_tools.py` to extract genes from AnnData files and generate the Gene DBs.
  - Use `src/scripts/ensembl.py` `convert_ensembl_to_ncbi` to convert ensembl genes to ncbi gene IDs.
- Update `src/dendrograms/Brain_region_mapping.tsv` and `src/dendrograms/Neurotransmitter_symbols_mapping.tsv` if needed (see WMBO repo for details)
- Generate the `src/dendrograms/one_concept_one_name.tsv`
  - See `src/test/template_generation_utils_test.py` script `test_find_direct_paths` function to generate the table 
- Generate the `src/dendrograms/CL_ontology_subset.tsv`
  - See `src/scripts/cl_ontology_table_generator.py` to generate the table
- Customise ABA atlas ontology processing in `src/scripts/template_generation_tools.py`. Search `DHBA` and change as needed
- Generate `src/dendrograms/resources/dhbao-base-materialized.owl`
- Generate `src/dendrograms/supplementary/version2/CCN20230722_dendrogram_with_ids.json`
  - Build `https://github.com/INCATools/relation-graph` in `/cli/target/universal/stage/bin` folder run: 
  - `./relation-graph --ontology-file ~/Downloads/dhbao-base.owl --output-file dhba_relations.ttl --mode rdf --property 'http://purl.obolibrary.org/obo/BFO_0000050' --property 'http://purl.obolibrary.org/obo/BFO_0000051'`
  - Then merge them: `sh run.sh robot merge --input ../dendrograms/resources/dhbao-base.owl --input ../dendrograms/resources/dhba_relations.ttl --output ../dendrograms/resources/dhbao-base-materialized.owl`
- Change taxonomy url in the `src/ontology/bgo.Makefile`
- Change taxonomy id in `src/scripts/cl_subset_terms.py`
- Change taxonomy id in `BICAN_INDV` `src/ontology/template_prefixes.json` and `src/ontology/template_prefixes.yaml`